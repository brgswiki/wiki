var map,roomData;function LayerControl(a,b,c,d,e,f){var g=document.createElement("div");g.style.backgroundColor="#ffffff00",g.style.borderRadius="5px",g.style.cursor="pointer",g.style.marginBottom="2px",g.style.textAlign="center",g.style.transitionDuration=".3s",g.style.border="1px solid #ffffff00",g.title=f,g.addEventListener("mouseenter",()=>{g.style.backgroundColor="#fff",g.style.borderColor="rgb(86,86,86)"}),g.addEventListener("mouseleave",()=>{g.style.backgroundColor="#ffffff00",g.style.borderColor="#ffffff00"}),a.appendChild(g);var h=document.createElement("div");h.style.color="rgb(86,86,86)",h.style.fontFamily="Roboto,Arial,sans-serif",h.style.fontSize="18px",h.style.lineHeight="30px",h.style.paddingLeft="10px",h.style.paddingRight="10px",h.textContent=e,g.appendChild(h),g.addEventListener("click",function(){b.overlayMapTypes.setAt(0,c),insertRooms(roomData,d)})}function CreateRoom(a,b,c,d,e,f){var g="room"+b;if(1===a){function a(a,b,c,d,e){infoWindow.setContent("<b>"+c+"</b><br>"+e+"<br><a href=\""+d+"\">Go to page</a>"),infoWindow.setPosition(b),infoWindow.open(map)}coord0=c[0],coord1=c[1],coord2=c[2],coord3=c[3];var h={lat:coord0[0]/6+coord1[0]/3+coord2[0]/6+coord3[0]/3,lng:coord0[1]/6+coord1[1]/3+coord2[1]/6+coord3[1]/3};this[g]=new google.maps.Polygon({paths:[{lat:coord0[0],lng:coord0[1]},{lat:coord1[0],lng:coord1[1]},{lat:coord2[0],lng:coord2[1]},{lat:coord3[0],lng:coord3[1]}],strokeWeight:0,fillColor:"#1976d2",fillOpacity:.1}),this[g].addListener("mouseover",()=>{this[g].setOptions({fillOpacity:.3})}),this[g].addListener("mouseout",()=>{this[g].setOptions({fillOpacity:.1})}),this[g].addListener("click",()=>{a(event,h,d,e,f)})}else 2===a?this[g].setMap(map):this[g].setMap(null)}function insertRooms(a,b){a.rooms.forEach(a=>{a.level===b?CreateRoom(2,a.id):CreateRoom(0,a.id)})}function initMap(){map=new google.maps.Map(document.getElementById("map"),{zoom:19,maxZoom:21,minZoom:18,center:{lat:53.693444,lng:-2.2478},mapTypeId:"hybrid",streetViewControl:!1,scaleControl:!0});const a={19:[[129434,129435],[84547,84548]],20:[[258869,258871],[169094,169097]],21:[[517738,517743],[338189,338195]]};var b=new google.maps.ImageMapType({getTileUrl:function(b,c){return 19>c||21<c||a[c][0][0]>b.x||b.x>a[c][0][1]||a[c][1][0]>b.y||b.y>a[c][1][1]?"":["/map/tiles/",c,"/z-1/",b.x,"_",b.y,".png"].join("")},tileSize:new google.maps.Size(512,512)}),c=new google.maps.ImageMapType({getTileUrl:function(b,c){return 19>c||21<c||a[c][0][0]>b.x||b.x>a[c][0][1]||a[c][1][0]>b.y||b.y>a[c][1][1]?"":["/map/tiles/",c,"/z0/",b.x,"_",b.y,".png"].join("")},tileSize:new google.maps.Size(512,512)}),d=new google.maps.ImageMapType({getTileUrl:function(b,c){return 19>c||21<c||a[c][0][0]>b.x||b.x>a[c][0][1]||a[c][1][0]>b.y||b.y>a[c][1][1]?"":["/map/tiles/",c,"/z1/",b.x,"_",b.y,".png"].join("")},tileSize:new google.maps.Size(512,512)}),e=new google.maps.ImageMapType({getTileUrl:function(b,c){return 19>c||21<c||a[c][0][0]>b.x||b.x>a[c][0][1]||a[c][1][0]>b.y||b.y>a[c][1][1]?"":["/map/tiles/",c,"/z2/",b.x,"_",b.y,".png"].join("")},tileSize:new google.maps.Size(512,512)});map.overlayMapTypes.insertAt(0,c);var f=document.createElement("div"),g=new LayerControl(f,map,b,"00","Basement","Switch to the basement map"),h=document.createElement("div"),i=new LayerControl(h,map,c,"0","Ground","Switch to the ground floor map"),j=document.createElement("div"),k=new LayerControl(j,map,d,"1","1st Floor","Switch to the 1st floor map"),l=document.createElement("div"),m=new LayerControl(l,map,e,"2","2nd Floor","Switch to the 2nd floor map"),n=document.createElement("div");n.style.display="flex",n.style.flexFlow="row wrap",n.style.justifyContent="space-around",n.style.width="195px",n.style.marginLeft="10px",n.style.padding="7px",n.style.backgroundColor="#ffffffe6",n.style.borderRadius="3px",n.appendChild(f),n.appendChild(h),n.appendChild(j),n.appendChild(l),map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(n),infoWindow=new google.maps.InfoWindow,fetch("/map/roomdata.min.json").then(a=>a.json()).then(a=>{roomData=a,roomData.rooms.forEach(a=>{CreateRoom(1,a.id,a.coords,a.title,a.url,a.desc)}),insertRooms(roomData,"0")})}